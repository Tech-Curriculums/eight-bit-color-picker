/**
 * @preserve
 * EightBitColorPicker Library
 *
 * Released under the MIT License
 * https://github.com/bilalq/eight-bit-color-picker/blob/master/LICENSE
 */
!function(f,e){"function"==typeof define&&define.amd?define([],e):f.EightBitColorPicker=e()}(this,function(){"use strict";function EightBitColorPicker(f){this.el=e(f.el)?f.el:document.getElementById(f.el),this.colorMap=f.colorMap||a,this.color=parseInt(f.color||this.el.dataset.color||t(),10),this.validate(),this.render()}var f="eight-bit-color-picker",e=function(f){return f&&f.nodeType&&f.tagName},t=function(){return Math.floor(256*Math.random())},o=function(f){return"number"==typeof f&&Math.floor(f)===f&&f>=0&&255>=f},a=["#000000","#800000","#008000","#808000","#000080","#800080","#008080","#c0c0c0","#808080","#ff0000","#00ff00","#ffff00","#0000ff","#ff00ff","#00ffff","#ffffff","#000000","#00005f","#000087","#0000af","#0000d7","#0000ff","#005f00","#005f5f","#005f87","#005faf","#005fd7","#005fff","#008700","#00875f","#008787","#0087af","#0087d7","#0087ff","#00af00","#00af5f","#00af87","#00afaf","#00afd7","#00afff","#00d700","#00d75f","#00d787","#00d7af","#00d7d7","#00d7ff","#00ff00","#00ff5f","#00ff87","#00ffaf","#00ffd7","#00ffff","#5f0000","#5f005f","#5f0087","#5f00af","#5f00d7","#5f00ff","#5f5f00","#5f5f5f","#5f5f87","#5f5faf","#5f5fd7","#5f5fff","#5f8700","#5f875f","#5f8787","#5f87af","#5f87d7","#5f87ff","#5faf00","#5faf5f","#5faf87","#5fafaf","#5fafd7","#5fafff","#5fd700","#5fd75f","#5fd787","#5fd7af","#5fd7d7","#5fd7ff","#5fff00","#5fff5f","#5fff87","#5fffaf","#5fffd7","#5fffff","#870000","#87005f","#870087","#8700af","#8700d7","#8700ff","#875f00","#875f5f","#875f87","#875faf","#875fd7","#875fff","#878700","#87875f","#878787","#8787af","#8787d7","#8787ff","#87af00","#87af5f","#87af87","#87afaf","#87afd7","#87afff","#87d700","#87d75f","#87d787","#87d7af","#87d7d7","#87d7ff","#87ff00","#87ff5f","#87ff87","#87ffaf","#87ffd7","#87ffff","#af0000","#af005f","#af0087","#af00af","#af00d7","#af00ff","#af5f00","#af5f5f","#af5f87","#af5faf","#af5fd7","#af5fff","#af8700","#af875f","#af8787","#af87af","#af87d7","#af87ff","#afaf00","#afaf5f","#afaf87","#afafaf","#afafd7","#afafff","#afd700","#afd75f","#afd787","#afd7af","#afd7d7","#afd7ff","#afff00","#afff5f","#afff87","#afffaf","#afffd7","#afffff","#d70000","#d7005f","#d70087","#d700af","#d700d7","#d700ff","#d75f00","#d75f5f","#d75f87","#d75faf","#d75fd7","#d75fff","#d78700","#d7875f","#d78787","#d787af","#d787d7","#d787ff","#d7af00","#d7af5f","#d7af87","#d7afaf","#d7afd7","#d7afff","#d7d700","#d7d75f","#d7d787","#d7d7af","#d7d7d7","#d7d7ff","#d7ff00","#d7ff5f","#d7ff87","#d7ffaf","#d7ffd7","#d7ffff","#ff0000","#ff005f","#ff0087","#ff00af","#ff00d7","#ff00ff","#ff5f00","#ff5f5f","#ff5f87","#ff5faf","#ff5fd7","#ff5fff","#ff8700","#ff875f","#ff8787","#ff87af","#ff87d7","#ff87ff","#ffaf00","#ffaf5f","#ffaf87","#ffafaf","#ffafd7","#ffafff","#ffd700","#ffd75f","#ffd787","#ffd7af","#ffd7d7","#ffd7ff","#ffff00","#ffff5f","#ffff87","#ffffaf","#ffffd7","#ffffff","#080808","#121212","#1c1c1c","#262626","#303030","#3a3a3a","#444444","#4e4e4e","#585858","#626262","#6c6c6c","#767676","#808080","#8a8a8a","#949494","#9e9e9e","#a8a8a8","#b2b2b2","#bcbcbc","#c6c6c6","#d0d0d0","#dadada","#e4e4e4","#eeeeee"],d=EightBitColorPicker.prototype;return d.render=function(){this.el.classList.add(f),this.buildSubNodes(),this.buildColorMapUI();var e;this.el.addEventListener("click",function(){this.show(),e||(e=function(f){this.el.contains(f.target)||(this.hide(),window.removeEventListener("click",e),e=null)}.bind(this),window.addEventListener("click",e))}.bind(this))},d.buildSubNodes=function(){this.el.innerHTML=String.prototype.concat.call('<div class="ebcp-selection" style="background: ',this.getHexColor(),';">',"&nbsp;","</div>",'<div class="ebcp-selector">','<div class="ebcp-colormap"></div>','<div class="ebcp-preview-values">','<div class="ebcp-text-container">','<input class="ebcp-text ebcp-8bit-color" type="text" value="',this.get8BitColor(),'">','<input readonly type="text" class="ebcp-text ebcp-hex-color" value="',this.getHexColor(),'">',"</div>",'<div class="ebcp-color-preview" style="background: ',this.getHexColor(),';">',"&nbsp;","</div>","</div>","</div>")},d.updateColor=function(f,e){var t=parseInt(f,10),a=this.loadSelectors();if(f&&f.length&&!(f.length>3)&&o(t)){var d=this.colorMap[t];e||(this.color=t,a.selectedColor.style.background=d),a.eightBitText.value=t,a.hexText.value=d,a.previewColor.style.background=d}},d.restoreColor=function(){var f=this.loadSelectors();f.previewColor.style.background=this.getHexColor(),f.hexText.value=this.getHexColor(),f.eightBitText.value=this.get8BitColor()},d.loadSelectors=function(){return this.selectors?this.selectors:(this.selectors={selectionUI:this.el.querySelector(".ebcp-selector"),selectedColor:this.el.querySelector(".ebcp-selection"),colorMap:this.el.querySelector(".ebcp-colormap"),eightBitText:this.el.querySelector(".ebcp-8bit-color"),hexText:this.el.querySelector(".ebcp-hex-color"),previewColor:this.el.querySelector(".ebcp-color-preview")},this.selectors)},d.buildColorMapUI=function(){var f=this,e=this.loadSelectors(),t=document.createDocumentFragment(),o=document.createElement("div"),a=0;this.colorMap.forEach(function(f,e){var d=document.createElement("div");d.dataset.eightBitColor=e,d.style.background=f,o.appendChild(d),a+=1,a%16===0&&(o.classList.add("ebcp-colormap-row"),t.appendChild(o),o=document.createElement("div"))}),e.colorMap.appendChild(t),e.colorMap.addEventListener("mouseover",function(e){var t=e.target.dataset.eightBitColor;f.updateColor(t,!0)}),e.colorMap.addEventListener("mouseleave",f.restoreColor.bind(f)),e.colorMap.addEventListener("click",function(e){f.updateColor(e.target.dataset.eightBitColor)}),e.eightBitText.addEventListener("keyup",function(e){return e.keyCode>=33&&e.keyCode<=40?!0:void f.updateColor(this.value)}),e.eightBitText.addEventListener("blur",f.restoreColor.bind(f))},EightBitColorPicker.detect=function(){var e=document.getElementsByClassName(f);return Array.prototype.map.call(e,function(f){return new EightBitColorPicker({el:f})})},d.validate=function(){var f;if(this.el||(f="Element for color picker not found"),o(this.color)||(f="Color outside the range of 0-255"),this.colorMap&&256===this.colorMap.length||(f="Invalid color map set"),f)throw new Error(f)},d.show=function(){var f=this.loadSelectors().selectionUI,e=this.el.offsetLeft,t=this.el.offsetTop;f.style.left=e+40+"px",f.style.top=t+40+"px",f.classList.add("ebcp-shown-selector")},d.hide=function(){var f=this.loadSelectors().selectionUI;f.classList.remove("ebcp-shown-selector")},d.get8BitColor=function(){return this.color},d.getHexColor=function(){return this.colorMap[this.color]},d.getRGBColor=function(){var f=this.getHexColor();return{r:parseInt(f.slice(1,3),16),g:parseInt(f.slice(3,5),16),b:parseInt(f.slice(5,7),16)}},d.getForegroundEscapeSequence=function(){return"\\x1b[38;5;"+this.get8BitColor()+"m"},d.getBackgroundEscapeSequence=function(){return"\\x1b[48;5;"+this.get8BitColor()+"m"},EightBitColorPicker});